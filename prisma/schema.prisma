// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  // posts should be able to be pulled up with either /posts/[id]
  // or /posts/[category]/[url]
  id          Int     @id @default(autoincrement())
  url         String  @unique
  category    String  @default("uncategorized")
  description String?
  body        String
  author      String  @default("kopymatic")
  authorId    String  @default("326489320980611075")

  //When unlisted is set to true the page will not show up on the list site.
  //You also wont be able to pull it up using /posts/[id], you will need the specific url
  //Admins will be able to pull up unlisted posts on a list seperate from the main one.
  unlisted Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Shortcut {
  id String @id @default(uuid())

  shortcut    String @unique
  redirectUrl String
  
  // Adding the ability to auto-generate shortcuts. 
  // When a shortcut is generated automatically, it will set the shortcut name automatically
  // And set this boolean to true
  autoGenerated Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}
